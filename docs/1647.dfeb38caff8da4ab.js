"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1647],{1647:(J,S,a)=>{a.r(S),a.d(S,{SearchPageModule:()=>Y});var F=a(177),d=a(9417),f=a(5694),l=a(4742),_=a(3314),m=a(467),e=a(4438),M=a(3294),C=a(5083);const I=(0,C.F3)("Keyboard");var v=a(5152),g=a(1626),b=a(929),T=a(5435),R=a(5189),G=a(3207);let $=(()=>{var i;class r{constructor(t){this.el=t,this.swiperElement=t.nativeElement}ngAfterViewInit(){Object.assign(this.el.nativeElement,this.config)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(e.aKT))},i.\u0275dir=e.FsC({type:i,selectors:[["","appSwiper",""]],inputs:{config:"config"}}),r})();function k(i,r){if(1&i){const o=e.RV6();e.j41(0,"swiper-slide")(1,"ion-card",1),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.onSelectCard(n))}),e.nrm(2,"img",2),e.j41(3,"ion-card-header")(4,"ion-card-subtitle"),e.EFF(5),e.k0s()()()()}if(2&i){const o=r.$implicit;e.R7$(2),e.FS9("src",o.main_image?o.main_image:"assets/img/card-temp-media.png",e.B4B),e.R7$(3),e.JRh(o.title)}}let x=(()=>{var i;class r{constructor(t){this.pexelsService=t,this.featuredCollections=[],this.cardSelected=new e.bkB,this.swiperConfig={slidesPerView:2,breakpoints:{320:{slidesPerView:2},576:{slidesPerView:2},768:{slidesPerView:3},992:{slidesPerView:4},1200:{slidesPerView:5}}}}ngOnInit(){var t=this;return(0,m.A)(function*(){yield t.getCollectionData()})()}getCollectionData(){var t=this;return(0,m.A)(function*(){if(t.featuredCollections.length>0)for(const n of t.featuredCollections){const s=t.pexelsService.getCollection(n.id);yield(0,G.s)(s).then(c=>{if(c.media.length>0){const p=c.media.find(h=>"Photo"===h.type);p&&(n.main_image=p.src.landscape)}})}})()}onSelectCard(t){this.cardSelected.emit(t)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(b.v))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-featured-collection"]],inputs:{featuredCollections:"featuredCollections"},outputs:{cardSelected:"cardSelected"},decls:4,vars:1,consts:[["appSwiper","",3,"config"],["color","light","mode","ios",3,"click"],["alt","Main image from collection",3,"src"]],template:function(t,n){1&t&&(e.j41(0,"section")(1,"swiper-container",0),e.Z7z(2,k,6,2,"swiper-slide",null,e.fX1),e.k0s()()),2&t&&(e.R7$(),e.Y8G("config",n.swiperConfig),e.R7$(),e.Dyx(n.featuredCollections))},dependencies:[l.b_,l.ME,l.HW,$],styles:["ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{max-height:48px;padding:10px 12px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),r})();const P=i=>({"is-selected":i});function w(i,r){1&i&&e.nrm(0,"ion-icon",7)}function E(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-item",6),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.onSelectOrientation(n,"orientation"))}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,w,1,0,"ion-icon",7),e.k0s()}if(2&i){const o=r.$implicit;e.Y8G("ngClass",e.eq3(5,P,o.isSelected)),e.R7$(2),e.SpI(" ",e.bMT(3,3,o.label)," "),e.R7$(2),e.vxM(4,o.isSelected?4:-1)}}function V(i,r){1&i&&e.nrm(0,"ion-icon",7)}function O(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-item",6),e.bIt("click",function(){const n=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.onSelectOrientation(n,"size"))}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,V,1,0,"ion-icon",7),e.k0s()}if(2&i){const o=r.$implicit;e.Y8G("ngClass",e.eq3(5,P,o.isSelected)),e.R7$(2),e.SpI(" ",e.bMT(3,3,o.label)," "),e.R7$(2),e.vxM(4,o.isSelected?4:-1)}}let z=(()=>{var i;class r{constructor(){this.currentFilters=[],this.selectedFilters=new e.bkB,this.orientationFilters=[{label:"filters.all_orientation",isSelected:!0,type:"orientation",value:""},{label:"filters.portrait",isSelected:!1,type:"orientation",value:"portrait"},{label:"filters.landscape",isSelected:!1,type:"orientation",value:"landscape"},{label:"filters.square",isSelected:!1,type:"orientation",value:"square"}],this.sizeFilters=[{label:"filters.all_sizes",isSelected:!0,type:"size",value:""},{label:"filters.large",isSelected:!1,type:"size",value:"large"},{label:"filters.medium",isSelected:!1,type:"size",value:"medium"},{label:"filters.small",isSelected:!1,type:"size",value:"small"}]}ngOnInit(){this.currentFilters&&this.currentFilters.length>0&&this.currentFilters.forEach(t=>{("orientation"===t.type?this.orientationFilters:this.sizeFilters).forEach(s=>s.isSelected=s.label===t.label)})}onSelectOrientation(t,n){("orientation"===n?this.orientationFilters:this.sizeFilters).forEach(c=>c.isSelected=c.label===t.label)}onApplyFilters(){const t=this.orientationFilters.find(c=>c.isSelected),n=this.sizeFilters.find(c=>c.isSelected),s=[];t&&s.push(t),n&&s.push(n),this.selectedFilters.emit(s)}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-search-filters"]],inputs:{currentFilters:"currentFilters"},outputs:{selectedFilters:"selectedFilters"},decls:19,vars:11,consts:[["mode","ios"],["mode","ios","lines","none",3,"inset"],[3,"ngClass"],[1,"last-filter-item"],[1,"ion-padding-horizontal","filters-footer"],["expand","block","mode","ios",3,"click"],[3,"click","ngClass"],["aria-hidden","true","name","checkmark-circle-outline","slot","end","size","small"]],template:function(t,n){1&t&&(e.j41(0,"section")(1,"article")(2,"ion-list-header",0),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-list",1),e.Z7z(6,E,5,7,"ion-item",2,e.fX1),e.k0s()(),e.j41(8,"article",3)(9,"ion-list-header",0),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"ion-list",1),e.Z7z(13,O,5,7,"ion-item",2,e.fX1),e.k0s()()(),e.j41(15,"section",4)(16,"ion-button",5),e.bIt("click",function(){return n.onApplyFilters()}),e.EFF(17),e.nI1(18,"translate"),e.k0s()()),2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,5,"filters.orientation")," "),e.R7$(2),e.Y8G("inset",!0),e.R7$(),e.Dyx(n.orientationFilters),e.R7$(4),e.SpI(" ",e.bMT(11,7,"filters.sizes")," "),e.R7$(2),e.Y8G("inset",!0),e.R7$(),e.Dyx(n.sizeFilters),e.R7$(4),e.SpI(" ",e.bMT(18,9,"filters.btn_apply_filters")," "))},dependencies:[F.YU,l.Jm,l.iq,l.uz,l.he,l.nf,l.AF,f.D9],styles:["ion-list-header[_ngcontent-%COMP%]{font-size:18px}.is-selected[_ngcontent-%COMP%]{--color: var(--secondary-color)}.last-filter-item[_ngcontent-%COMP%]{padding-bottom:60px}.filters-footer[_ngcontent-%COMP%]{bottom:0;left:0;position:fixed;right:0;width:100%}"]}),r})();function B(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-text")(1,"h4",13),e.EFF(2),e.nI1(3,"translate"),e.k0s()(),e.j41(4,"app-featured-collection",14),e.bIt("cardSelected",function(n){e.eBV(o);const s=e.XpG();return e.Njj(s.onSelectCard(n))}),e.k0s()}if(2&i){const o=e.XpG();e.R7$(2),e.JRh(e.bMT(3,2,"search.popular_search")),e.R7$(2),e.Y8G("featuredCollections",o.featuredCollection.collections)}}function D(i,r){1&i&&e.nrm(0,"app-clock-loading")}function N(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",15)(3,"ion-button",16),e.bIt("click",function(){e.eBV(o),e.XpG();const n=e.sdS(20);return e.Njj(n.dismiss())}),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"ion-title"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"ion-buttons",17)(10,"ion-button",16),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.onClearFilters())}),e.nrm(11,"ion-icon",18),e.EFF(12),e.nI1(13,"translate"),e.k0s()()()(),e.j41(14,"ion-content")(15,"app-search-filters",19),e.bIt("selectedFilters",function(n){e.eBV(o);const s=e.XpG();return e.Njj(s.onFiltersApply(n))}),e.k0s()()}if(2&i){const o=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,4,"common.close")," "),e.R7$(3),e.SpI(" ",e.bMT(8,6,"filters.title"),""),e.R7$(5),e.SpI(" ",e.bMT(13,8,"common.clear")," "),e.R7$(3),e.Y8G("currentFilters",o.currentFilters)}}const L=[{path:"",component:(()=>{var i;class r{constructor(t,n){this.pexelsService=t,this.helperService=n,this.subs=new v.W,this.photoList=(0,e.vPA)([]),this.page=1,this.searchParams=new g.Nl,this.currentFilters=[],this.isLoading=(0,e.vPA)(!1),this.isSearching=(0,e.vPA)(!1)}ngOnInit(){this.searchForm=new d.gE({search:new d.MJ("",{nonNullable:!0})}),this.listeningSearch(),this.getFeaturedCollections()}listeningSearch(){this.subs.add=this.searchForm.get("search").valueChanges.pipe((0,M.F)()).subscribe(t=>{t||(this.isSearching.set(!1),this.page=1,this.photoList.set([]),this.content.scrollToTop(500).then())})}onSubmit(){var t;this.page=1,this.photoList.set([]),this.content.scrollToTop(500).then(),this.onSearch((null==(t=this.searchForm.get("search"))?void 0:t.value)||"")}onSearch(t,n){var c,p,s=this;if(t.length<=0)return this.page=1,this.photoList.set([]),null==(c=this.infiniteScroll)||c.complete(),void this.isLoading.set(!1);this.isSearching.set(!0),this.subs.add=this.pexelsService.searchQuery(t,this.page,this.searchParams).subscribe({next:p=>{var h,u;this.photoList.update(U=>[...U,...p.photos||[]]),null==(h=this.infiniteScroll)||h.complete(),this.isLoading.set(!1),"web"!==(null==(u=C.Ii)?void 0:u.getPlatform())&&I.hide().then(),n&&this.content.scrollToTop(200)},error:(p=(0,m.A)(function*(h){var u;null==(u=s.infiniteScroll)||u.complete(),s.isLoading.set(!1),yield s.helperService.showError(null==h?void 0:h.code)}),function(u){return p.apply(this,arguments)})})}onGalleryInfinite(t){var n;this.page=this.page+1,this.isLoading.set(!0),this.onSearch((null==(n=this.searchForm.get("search"))?void 0:n.value)||"")}getFeaturedCollections(){var n,t=this;this.subs.add=this.pexelsService.getFeaturedCollections().subscribe({next:n=>{this.featuredCollection=n},error:(n=(0,m.A)(function*(s){yield t.helperService.showError(null==s?void 0:s.code)}),function(c){return n.apply(this,arguments)})})}onSelectCard(t){var n,s;this.page=this.page+1,this.isLoading.set(!0),null==(n=this.searchForm.get("search"))||n.setValue(t.title),this.searchInput.setFocus().then(),this.onSearch((null==(s=this.searchForm.get("search"))?void 0:s.value)||"")}onFiltersApply(t){var c;this.modal.dismiss().then();let n=new g.Nl;this.currentFilters=t;const s={orientation:"orientation",size:"size"};t.forEach(p=>{const h=s[p.type];h&&(n=n.append(h,p.value))}),this.searchParams=n,this.page=1,this.photoList.set([]),this.onSearch((null==(c=this.searchForm.get("search"))?void 0:c.value)||"",!0)}onClearFilters(){var t;this.modal.dismiss().then(),this.searchParams=new g.Nl,this.currentFilters=[],this.page=1,this.photoList.set([]),this.onSearch((null==(t=this.searchForm.get("search"))?void 0:t.value)||"",!0)}ngOnDestroy(){this.subs.dispose()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(b.v),e.rXU(v.w))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-search"]],viewQuery:function(t,n){if(1&t&&(e.GBs(l.W9,5),e.GBs(l.Ax,5),e.GBs(l.S1,5),e.GBs(l.Sb,5)),2&t){let s;e.mGM(s=e.lsd())&&(n.content=s.first),e.mGM(s=e.lsd())&&(n.infiniteScroll=s.first),e.mGM(s=e.lsd())&&(n.searchInput=s.first),e.mGM(s=e.lsd())&&(n.modal=s.first)}},decls:22,vars:12,consts:[["page",""],["infiniteScroll",""],["modal",""],[1,"ion-page"],["mode","ios",3,"translucent"],[3,"ngSubmit","formGroup"],["inputmode","search","mode","ios","formControlName","search",3,"placeholder"],["slot","end","name","options-outline","id","filters-modal",1,"filter-icon"],[1,"ion-padding"],[3,"photos"],[3,"ionInfinite"],[1,"infinite-scroll-content"],["trigger","filters-modal","mode","ios",3,"presentingElement"],[1,"search_label"],[3,"cardSelected","featuredCollections"],["slot","start"],[3,"click"],["slot","end",1,"btn-clear"],["size","small","slot","start","name","close-sharp","aria-label","Clear filters"],[3,"selectedFilters","currentFilters"]],template:function(t,n){if(1&t){const s=e.RV6();e.j41(0,"section",3,0)(2,"ion-header",4)(3,"ion-toolbar")(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"ion-toolbar")(8,"form",5),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.onSubmit())}),e.j41(9,"ion-searchbar",6),e.nI1(10,"translate"),e.nrm(11,"ion-icon",7),e.k0s()()()(),e.j41(12,"ion-content",8),e.DNE(13,B,5,4),e.nrm(14,"app-gallery-view",9),e.j41(15,"ion-infinite-scroll",10,1),e.bIt("ionInfinite",function(p){return e.eBV(s),e.Njj(n.onGalleryInfinite(p))}),e.j41(17,"div",11),e.DNE(18,D,1,0,"app-clock-loading"),e.k0s()(),e.j41(19,"ion-modal",12,2),e.DNE(21,N,16,10,"ng-template"),e.k0s()()()}if(2&t){const s=e.sdS(1);e.R7$(2),e.Y8G("translucent",!0),e.R7$(3),e.SpI(" ",e.bMT(6,8,"search.title"),""),e.R7$(3),e.Y8G("formGroup",n.searchForm),e.R7$(),e.FS9("placeholder",e.bMT(10,10,"search.search_placeholder")),e.R7$(4),e.vxM(13,n.featuredCollection&&!n.isSearching()?13:-1),e.R7$(),e.Y8G("photos",n.photoList()),e.R7$(4),e.vxM(18,n.isLoading()?18:-1),e.R7$(),e.Y8G("presentingElement",s)}},dependencies:[d.qT,d.BC,d.cb,d.j4,d.JD,l.Jm,l.QW,l.W9,l.eU,l.iq,l.Ax,l.S1,l.IO,l.BC,l.ai,l.Sb,l.Gw,T.r,R.C,x,z,f.D9],styles:[".search_label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--secondary-color)}.filter-icon[_ngcontent-%COMP%]{margin-left:8px;order:1;font-size:28px}.btn-clear[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--main-color)}.btn-clear[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:0}"]}),r})()}];let A=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[_.iI.forChild(L),_.iI]}),r})();var X=a(3887);let Y=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[F.MD,d.YN,d.X1,l.bv,A,f.h,X.G]}),r})()}}]);