"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9210],{9210:(D,S,c)=>{c.r(S),c.d(S,{SearchPageModule:()=>H});var u=c(6814),p=c(6223),_=c(7166),l=c(3582),C=c(8520),g=c(5861),T=c(3997),f=c(2726);const b=(0,f.fo)("Keyboard");var F=c(3778),v=c(9862),e=c(2029),A=c(6593),x=c(2196),w=c(2484),M=c(8144),L=c(708);let O=(()=>{var i;class r{constructor(t){this.el=t,this.swiperElement=t.nativeElement}ngAfterViewInit(){Object.assign(this.el.nativeElement,this.config)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appSwiper",""]],inputs:{config:"config"}}),r})();function J(i,r){if(1&i){const s=e.EpF();e.ynx(0),e.TgZ(1,"swiper-slide")(2,"ion-card",2),e.NdJ("click",function(){const o=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.onSelectCard(o))}),e._UZ(3,"img",3),e.TgZ(4,"ion-card-header")(5,"ion-card-subtitle"),e._uU(6),e.qZA()()()(),e.BQk()}if(2&i){const s=r.$implicit;e.xp6(3),e.s9C("src",s.main_image?s.main_image:"assets/img/card-temp-media.png",e.LSH),e.xp6(3),e.Oqu(s.title)}}let G=(()=>{var i;class r{constructor(t){this.pexelsService=t,this.featuredCollections=[],this.cardSelected=new e.vpe,this.swiperConfig={slidesPerView:2,breakpoints:{320:{slidesPerView:2},576:{slidesPerView:2},768:{slidesPerView:3},992:{slidesPerView:4},1200:{slidesPerView:5}}}}ngOnInit(){var t=this;return(0,g.Z)(function*(){yield t.getCollectionData()})()}getCollectionData(){var t=this;return(0,g.Z)(function*(){if(t.featuredCollections.length>0)for(const n of t.featuredCollections){const o=t.pexelsService.getCollection(n.id);yield(0,L.n)(o).then(a=>{if(a.media.length>0){const d=a.media.find(h=>"Photo"===h.type);d&&(n.main_image=d.src.landscape)}})}})()}onSelectCard(t){this.cardSelected.emit(t)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(x.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-featured-collection"]],inputs:{featuredCollections:"featuredCollections"},outputs:{cardSelected:"cardSelected"},decls:3,vars:2,consts:[["appSwiper","",3,"config"],[4,"ngFor","ngForOf"],["color","light","mode","ios",3,"click"],["alt","Main image from collection",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"section")(1,"swiper-container",0),e.YNc(2,J,7,2,"ng-container",1),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("config",n.swiperConfig),e.xp6(1),e.Q6J("ngForOf",n.featuredCollections))},dependencies:[u.sg,l.PM,l.Zi,l.tO,O],styles:["ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{max-height:48px;padding:10px 12px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),r})();function Q(i,r){1&i&&e._UZ(0,"ion-icon",8)}const Z=function(i){return{"is-selected":i}};function I(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"ion-item",6),e.NdJ("click",function(){const o=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.onSelectOrientation(o,"orientation"))}),e.TgZ(1,"ion-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Q,1,0,"ion-icon",7),e.qZA()}if(2&i){const s=r.$implicit;e.Q6J("ngClass",e.VKq(5,Z,s.isSelected)),e.xp6(2),e.hij(" ",e.lcZ(3,3,s.label)," "),e.xp6(2),e.Q6J("ngIf",s.isSelected)}}function N(i,r){1&i&&e._UZ(0,"ion-icon",8)}function z(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"ion-item",6),e.NdJ("click",function(){const o=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.onSelectOrientation(o,"size"))}),e.TgZ(1,"ion-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,N,1,0,"ion-icon",7),e.qZA()}if(2&i){const s=r.$implicit;e.Q6J("ngClass",e.VKq(5,Z,s.isSelected)),e.xp6(2),e.hij(" ",e.lcZ(3,3,s.label)," "),e.xp6(2),e.Q6J("ngIf",s.isSelected)}}let U=(()=>{var i;class r{constructor(){this.currentFilters=[],this.selectedFilters=new e.vpe,this.orientationFilters=[{label:"filters.all_orientation",isSelected:!0,type:"orientation",value:""},{label:"filters.portrait",isSelected:!1,type:"orientation",value:"portrait"},{label:"filters.landscape",isSelected:!1,type:"orientation",value:"landscape"},{label:"filters.square",isSelected:!1,type:"orientation",value:"square"}],this.sizeFilters=[{label:"filters.all_sizes",isSelected:!0,type:"size",value:""},{label:"filters.large",isSelected:!1,type:"size",value:"large"},{label:"filters.medium",isSelected:!1,type:"size",value:"medium"},{label:"filters.small",isSelected:!1,type:"size",value:"small"}]}ngOnInit(){this.currentFilters&&this.currentFilters.length>0&&this.currentFilters.forEach(t=>{("orientation"===t.type?this.orientationFilters:this.sizeFilters).forEach(o=>o.isSelected=o.label===t.label)})}onSelectOrientation(t,n){("orientation"===n?this.orientationFilters:this.sizeFilters).forEach(a=>a.isSelected=a.label===t.label)}onApplyFilters(){const t=this.orientationFilters.find(a=>a.isSelected),n=this.sizeFilters.find(a=>a.isSelected),o=[];t&&o.push(t),n&&o.push(n),this.selectedFilters.emit(o)}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-filters"]],inputs:{currentFilters:"currentFilters"},outputs:{selectedFilters:"selectedFilters"},decls:17,vars:13,consts:[["mode","ios"],["mode","ios","lines","none",3,"inset"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"last-filter-item"],[1,"ion-padding-horizontal","filters-footer"],["expand","block","mode","ios",3,"click"],[3,"ngClass","click"],["aria-hidden","true","name","checkmark-circle-outline","slot","end","size","small",4,"ngIf"],["aria-hidden","true","name","checkmark-circle-outline","slot","end","size","small"]],template:function(t,n){1&t&&(e.TgZ(0,"section")(1,"article")(2,"ion-list-header",0),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-list",1),e.YNc(6,I,5,7,"ion-item",2),e.qZA()(),e.TgZ(7,"article",3)(8,"ion-list-header",0),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ion-list",1),e.YNc(12,z,5,7,"ion-item",2),e.qZA()()(),e.TgZ(13,"section",4)(14,"ion-button",5),e.NdJ("click",function(){return n.onApplyFilters()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,7,"filters.orientation")," "),e.xp6(2),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",n.orientationFilters),e.xp6(3),e.hij(" ",e.lcZ(10,9,"filters.sizes")," "),e.xp6(2),e.Q6J("inset",!0),e.xp6(1),e.Q6J("ngForOf",n.sizeFilters),e.xp6(3),e.hij(" ",e.lcZ(16,11,"filters.btn_apply_filters")," "))},dependencies:[u.mk,u.sg,u.O5,l.YG,l.gu,l.Ie,l.Q$,l.q_,l.yh,_.X$],styles:["ion-list-header[_ngcontent-%COMP%]{font-size:18px}.is-selected[_ngcontent-%COMP%]{--color: var(--secondary-color)}.last-filter-item[_ngcontent-%COMP%]{padding-bottom:60px}.filters-footer[_ngcontent-%COMP%]{bottom:0;left:0;position:fixed;right:0;width:100%}"]}),r})();function $(i,r){if(1&i){const s=e.EpF();e.ynx(0),e.TgZ(1,"ion-text")(2,"h4",14),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"app-featured-collection",15),e.NdJ("cardSelected",function(n){e.CHM(s);const o=e.oxw();return e.KtG(o.onSelectCard(n))}),e.qZA(),e.BQk()}if(2&i){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"search.popular_search")),e.xp6(2),e.Q6J("featuredCollections",s.featuredCollection.collections)}}function E(i,r){1&i&&(e.ynx(0),e._UZ(1,"app-clock-loading"),e.BQk())}function k(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",16)(3,"ion-button",17),e.NdJ("click",function(){e.CHM(s),e.oxw();const n=e.MAs(20);return e.KtG(n.dismiss())}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"ion-buttons",18)(10,"ion-button",17),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onClearFilters())}),e._UZ(11,"ion-icon",19),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"ion-content")(15,"app-search-filters",20),e.NdJ("selectedFilters",function(n){e.CHM(s);const o=e.oxw();return e.KtG(o.onFiltersApply(n))}),e.qZA()()}if(2&i){const s=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"common.close")," "),e.xp6(3),e.hij(" ",e.lcZ(8,6,"filters.title")," "),e.xp6(5),e.hij(" ",e.lcZ(13,8,"common.clear")," "),e.xp6(3),e.Q6J("currentFilters",s.currentFilters)}}const V=[{path:"",component:(()=>{var i;class r{constructor(t,n,o){this.titleService=t,this.pexelsService=n,this.helperService=o,this.subs=new F.t,this.photoList=[],this.page=1,this.searchParams=new v.LE,this.currentFilters=[],this.isLoading=!1,this.isSearching=!1}ngOnInit(){this.titleService.setTitle("PicHunt | Search"),this.searchForm=new p.cw({search:new p.NI("",{nonNullable:!0})}),this.listeningSearch(),this.getFeaturedCollections()}listeningSearch(){this.subs.add=this.searchForm.get("search").valueChanges.pipe((0,T.x)()).subscribe(t=>{t||(this.isSearching=!1,this.page=1,this.photoList=[],this.content.scrollToTop(500).then())})}onSubmit(){var t;this.page=1,this.photoList=[],this.content.scrollToTop(500).then(),this.onSearch((null===(t=this.searchForm.get("search"))||void 0===t?void 0:t.value)||"")}onSearch(t,n){var a,d,o=this;if(t.length<=0)return this.page=1,this.photoList=[],null===(a=this.infiniteScroll)||void 0===a||a.complete(),void(this.isLoading=!1);this.isSearching=!0,this.subs.add=this.pexelsService.searchQuery(t,this.page,this.searchParams).subscribe({next:d=>{var h;this.photoList=[...this.photoList,...d.photos||[]],null===(h=this.infiniteScroll)||void 0===h||h.complete(),this.isLoading=!1,"web"!==(null==f.dV?void 0:f.dV.getPlatform())&&b.hide().then(),n&&this.content.scrollToTop(200)},error:(d=(0,g.Z)(function*(h){var m;null===(m=o.infiniteScroll)||void 0===m||m.complete(),o.isLoading=!1,yield o.helperService.showError(null==h?void 0:h.code)}),function(m){return d.apply(this,arguments)})})}onGalleryInfinite(t){var n;this.page=this.page+1,this.isLoading=!0,this.onSearch((null===(n=this.searchForm.get("search"))||void 0===n?void 0:n.value)||"")}getFeaturedCollections(){var n,t=this;this.subs.add=this.pexelsService.getFeaturedCollections().subscribe({next:n=>{this.featuredCollection=n},error:(n=(0,g.Z)(function*(o){yield t.helperService.showError(null==o?void 0:o.code)}),function(a){return n.apply(this,arguments)})})}onSelectCard(t){var n,o;this.page=this.page+1,this.isLoading=!0,null===(n=this.searchForm.get("search"))||void 0===n||n.setValue(t.title),this.searchInput.setFocus().then(),this.onSearch((null===(o=this.searchForm.get("search"))||void 0===o?void 0:o.value)||"")}onFiltersApply(t){var n;this.modal.dismiss().then();let o=new v.LE;this.currentFilters=t;const a={orientation:"orientation",size:"size"};t.forEach(d=>{const h=a[d.type];h&&(o=o.append(h,d.value))}),this.searchParams=o,this.page=1,this.photoList=[],this.onSearch((null===(n=this.searchForm.get("search"))||void 0===n?void 0:n.value)||"",!0)}onClearFilters(){var t;this.modal.dismiss().then(),this.searchParams=new v.LE,this.currentFilters=[],this.page=1,this.photoList=[],this.onSearch((null===(t=this.searchForm.get("search"))||void 0===t?void 0:t.value)||"",!0)}ngOnDestroy(){this.subs.dispose()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(A.Dx),e.Y36(x.U),e.Y36(F.W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search"]],viewQuery:function(t,n){if(1&t&&(e.Gf(l.W2,5),e.Gf(l.ju,5),e.Gf(l.VI,5),e.Gf(l.ki,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.content=o.first),e.iGM(o=e.CRH())&&(n.infiniteScroll=o.first),e.iGM(o=e.CRH())&&(n.searchInput=o.first),e.iGM(o=e.CRH())&&(n.modal=o.first)}},decls:22,vars:12,consts:[[1,"ion-page"],["page",""],["mode","ios",3,"translucent"],[3,"formGroup","ngSubmit"],["inputmode","search","mode","ios","formControlName","search",3,"placeholder"],["slot","end","name","options-outline","id","filters-modal",1,"filter-icon"],[1,"ion-padding"],[4,"ngIf"],[3,"photos"],[3,"ionInfinite"],["infiniteScroll",""],[1,"infinite-scroll-content"],["trigger","filters-modal","mode","ios",3,"presentingElement"],["modal",""],[1,"search_label"],[3,"featuredCollections","cardSelected"],["slot","start"],[3,"click"],["slot","end",1,"btn-clear"],["size","small","slot","start","name","close-sharp","aria-label","Clear filters"],[3,"currentFilters","selectedFilters"]],template:function(t,n){if(1&t&&(e.TgZ(0,"section",0,1)(2,"ion-header",2)(3,"ion-toolbar")(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"ion-toolbar")(8,"form",3),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(9,"ion-searchbar",4),e.ALo(10,"translate"),e._UZ(11,"ion-icon",5),e.qZA()()()(),e.TgZ(12,"ion-content",6),e.YNc(13,$,6,4,"ng-container",7),e._UZ(14,"app-gallery-view",8),e.TgZ(15,"ion-infinite-scroll",9,10),e.NdJ("ionInfinite",function(a){return n.onGalleryInfinite(a)}),e.TgZ(17,"div",11),e.YNc(18,E,2,0,"ng-container",7),e.qZA()(),e.TgZ(19,"ion-modal",12,13),e.YNc(21,k,16,10,"ng-template"),e.qZA()()()),2&t){const o=e.MAs(1);e.xp6(2),e.Q6J("translucent",!0),e.xp6(3),e.hij(" ",e.lcZ(6,8,"search.title")," "),e.xp6(3),e.Q6J("formGroup",n.searchForm),e.xp6(1),e.s9C("placeholder",e.lcZ(10,10,"search.search_placeholder")),e.xp6(4),e.Q6J("ngIf",n.featuredCollection&&!n.isSearching),e.xp6(1),e.Q6J("photos",n.photoList),e.xp6(4),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("presentingElement",o)}},dependencies:[u.O5,p._Y,p.JJ,p.JL,p.sg,p.u,l.YG,l.Sm,l.W2,l.Gu,l.gu,l.ju,l.VI,l.yW,l.wd,l.sr,l.ki,l.j9,w.p,M.I,G,U,_.X$],styles:[".search_label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--secondary-color)}.filter-icon[_ngcontent-%COMP%]{margin-left:8px;order:1;font-size:28px}.btn-clear[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--main-color)}.btn-clear[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:0}"]}),r})()}];let Y=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[C.Bz.forChild(V),C.Bz]}),r})();var j=c(6208);let H=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,p.u5,p.UX,l.Pc,Y,_.aw,j.m]}),r})()}}]);